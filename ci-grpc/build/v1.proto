syntax = "proto3";

option go_package = "build.rpc.v1";

message Request {
    // project name
    string name = 1;
    // event branch
    string branch = 2;
    // repository url
    string url = 3;
    // commit id
    string id = 4;
    // is query the latest build job. Only use in query actions.
    bool latest = 5;
}

message Reply {
    // 0 - success
    // other - failed
    int32 code = 1;
    // Empty when success, otherwise there will be error message
    string message = 2;
}

message JobDetail {
    string name = 1;
    int32 status = 2;
    string timestamp = 3;
    string branch = 4;
    string url = 5;
}

message JobInfo {
    int32 count = 1;
    repeated JobDetail jd = 2;
}


service BuildService {
    rpc Run (Request) returns (Reply) {
    }

    rpc Ping (Request) returns (Reply) {
    }

    rpc GetJob (Request) returns (JobInfo) {
    }


}
